# 지역변수의 범위를 최소화하라

### 1. 지역변수 유효 범위 최소화 
C언어에서는 지역변수를 코드 블록의 첫 머리에 선언하는 경우가 많고, 여전히 습관처럼 따르는 개발자들이 많다.  
하지만 자바에서는 문장을 선언할 수 있는 곳이면 어디서든 변수를 선언할 수 있다. (C언어도 C99 표준부터 바뀜)

#### 🎯 지역변수의 유효 범위를 최소화했을 때의 장점
- 코드 가독성과 유지보수성 높아짐
- 오류 가능성 줄일 수 있음


### 2. 지역변수의 범위를 줄이는 방법
#### 1) 가장 강력한 기법은 __가장 처름 쓰일 때 선언하기

- 선언하기 훨씬 전에 선언해두면 코드가 어수선해져 가독성이 떨어짐
- 실제 사용하는 시점에 타입과 초깃값이 기억나지 않을 수 있음
- 실제 사용하는 블록 바깥에서 변수를 선언하면, 블록 바깥에서 실수로 사용해 끔찍한 결과로 이어질 수 있음

#### 2) 거의 모든 지역변수는 선언과 동시에 초기화 하기
- 초기화에 필요한 정보가 충분하지 않다면, 충분해질 때까지 선언을 미루기
- try-catch문에서는 예외 (초기화하는 표현식에서 검사 예외를 던질 가능성이 있다면 try 블록 안에서 초기화하기 - 예외가 블록을 넘어 전파되는 것 방지)
- 변수 값을 블록 try 블록 바깥에서도 사용해야하면 try블록 앞에 선언하기

#### 3) while문 보다는 for문을 사용해 변수 범위 최소화하기
- for문에서는 반복 변수의 범위가 for 키워드와 몸체 사이의 괄호 안으로 제한되기 때문에 for문이 나음

```java
// 컬렉션이나 배열을 순회하는 권장 관용구
for (Element e : c) {
  ... 
}
```
```java
// 반복자가 필요할 때의 관용구
for (Iterator<Element> i = c.iterator(); i.hasNext();) {
  ...
}
```

> while 문이 별로인 이유

```java
Iterator<Element> i = c.iterator();

while (i.hasNext()) {
  doSomething(i.next());
}

...

Iterator<Element> i2 = c2.iterator();

while (i.hasNext()) {  // 버그 !
  doSomething(i2.next());
}

```

- 유효범위가 제한적이지 않아 컴파일도 잘되고 예외도 던지지 않지만 버그 발생
- for문 사용 시 복사 붙여넣기를 해도 똑같은 변수를 여러 반복문에서 사용해도 되기 때문에 오류 발생 가능성 적음

> +) 지역변수의 버뮈를 최소화 하는 반복문 관용구 하나 더 !

```java
for (int i = 0; n = expensiveComputation(); i < n; i++) {
  ...
}
```
- 반복 여부를 결정짓는 변수 i의 한계값을 n에 저장해 반복 때마다 계산하는 비용 없앰


#### 4) 메서드를 작게 유지하고 한가지 기능에 집중하기
- 한 메서드가 한 기능에 집중하도록 기능별로 쪼개서 다른 기능을 수행하는 코드에서 접근할 수 없게 막기

