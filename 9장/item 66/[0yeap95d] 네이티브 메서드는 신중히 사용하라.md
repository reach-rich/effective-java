### 📝자바 네이티브 인터페이스(Java Native Interface, JNI)

**: 네이티브 메서드를 호출하는 기술**

1. 레지스트리 같은 플랫폼 특화 기능을 사용
2. 네이티브 코드로 작성된 기존 라이브러리를 사용
3. 성능 개선을 목적으로 성능에 결정적인 영향을 주는 영역만 따로 네이티브로 작성

*자바가 성숙해가면서 네이티브 메서드 사용 필요성이 감소*

<br>

**💡성능을 개선할 목적으로 네이티브 메서드를 사용하는 것은 권장하지 않음**

초기 자바에서 `BigInteger`는 C로 작성한 고성능 라이브러리에 의지했지만, 자바3에서 네이티브 구현보다 빨라짐

*그러나 네이티브 라이브러리가 GNU 다중 정밀 연산 라이브러리(GMP)를 필두로 개선 작업을 계속하면서 고성능 다중 정밀 연산이 필요한 경우에는 네이티브 메서드를 통해 GMP를 사용하는 것을 고려해도 좋음*

<br>

### ❗ 네이티브 메서드의 단점

- 네이티브 언어는 안전하지 않아 애플리케이션도 메모리 훼손 오류로부터 안전하지 않음
- 네이티브 언어는 자바보다 플랫폼을 많이 타서 이식성이 낮음
- 디버깅이 더 어려움
- 주의하지 않으면 속도가 더 느려질 수 있음
- 가비지 컬렉터가 네이티브 메모리는 자동으로 회수하지 못하고, 추적조차 할 수 없음
- 자바코드와 네이티브 코드 경계를 넘나들때 비용이 추가됨
- 자바코드와 네이티브 코드 사이의 '접착코드(glue code)' 작성하는 것은 귀찮은 작업이며, 가독성도 떨어짐

<br>

### 📌 핵심정리

**네이티브 메서드를 사용하려거든 한번 더 생각하라.**

**네이티브 메서드가 성능을 개선해주는 일은 많지 않다.**

**저수준 자원이나 네이티브 라이브러리를 사용해야만 해서 어쩔 수 없더라도 네이티브 코드는 최소한만 사용하고 철저히 테스트하라.**

**네이티브 코드 안에 숨은 단 하나의 버그가 여러분 애플리케이션 전체를 훼손할 수도 있다.**

<br>

